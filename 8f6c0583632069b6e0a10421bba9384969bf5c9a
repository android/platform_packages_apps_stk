{
  "comments": [
    {
      "key": {
        "uuid": "87c814b1_751fddca",
        "filename": "src/com/android/stk/StkAppService.java",
        "patchSetId": 5
      },
      "lineNbr": 166,
      "author": {
        "id": 1138138
      },
      "writtenOn": "2017-11-17T03:40:08Z",
      "side": 1,
      "message": "Doesn\u0027t seem used anymore since changing isScreenIdle() implementation, clean up?",
      "range": {
        "startLine": 166,
        "startChar": 12,
        "endLine": 166,
        "endChar": 38
      },
      "revId": "8f6c0583632069b6e0a10421bba9384969bf5c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6a82cda8_44924d14",
        "filename": "src/com/android/stk/StkAppService.java",
        "patchSetId": 5
      },
      "lineNbr": 166,
      "author": {
        "id": 1163305
      },
      "writtenOn": "2017-11-17T05:59:03Z",
      "side": 1,
      "message": "Yes. Actually I would like to use it in another commit, but I agree that we should remove it in this commit. I will upload the next patch set.",
      "parentUuid": "87c814b1_751fddca",
      "range": {
        "startLine": 166,
        "startChar": 12,
        "endLine": 166,
        "endChar": 38
      },
      "revId": "8f6c0583632069b6e0a10421bba9384969bf5c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3d1eba36_c9258866",
        "filename": "src/com/android/stk/StkAppService.java",
        "patchSetId": 5
      },
      "lineNbr": 712,
      "author": {
        "id": 1138138
      },
      "writtenOn": "2017-11-17T03:40:08Z",
      "side": 1,
      "message": "Should be a deprecated interface, is this working in all cases for you? Would like to check whether another API can be used.",
      "range": {
        "startLine": 712,
        "startChar": 41,
        "endLine": 712,
        "endChar": 56
      },
      "revId": "8f6c0583632069b6e0a10421bba9384969bf5c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "100058c0_b52d898c",
        "filename": "src/com/android/stk/StkAppService.java",
        "patchSetId": 5
      },
      "lineNbr": 712,
      "author": {
        "id": 1163305
      },
      "writtenOn": "2017-11-17T05:59:03Z",
      "side": 1,
      "message": "Actually getRunningTasks() is no longer available to \"third party applications\" as mentioned in the API specification, but still works for the system applications. It is still used by some system applications like System UI (NotificationPanelView), Telephony Service (LocationAccessPolicy) and so on because there is no better solution available. As you can see, isTopOfStack() in this class also uses getRunningTasks(), so I hope that we can keep using it for now, then update it when we come up with any other new solution.",
      "parentUuid": "3d1eba36_c9258866",
      "range": {
        "startLine": 712,
        "startChar": 41,
        "endLine": 712,
        "endChar": 56
      },
      "revId": "8f6c0583632069b6e0a10421bba9384969bf5c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3b39b75d_ab51d2b8",
        "filename": "src/com/android/stk/StkAppService.java",
        "patchSetId": 5
      },
      "lineNbr": 1464,
      "author": {
        "id": 1138138
      },
      "writtenOn": "2017-11-17T03:40:08Z",
      "side": 1,
      "message": "For each event in the old setup cmd, there is a check whether the new setup cmd has that event, then unregistering if it\u0027s not in new setup cmd list.\n\nIt seems simpler to loop through the old events \u0026 unregister, and then setup the new event list.",
      "range": {
        "startLine": 1464,
        "startChar": 19,
        "endLine": 1464,
        "endChar": 95
      },
      "revId": "8f6c0583632069b6e0a10421bba9384969bf5c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7fbfb15f_35ef033c",
        "filename": "src/com/android/stk/StkAppService.java",
        "patchSetId": 5
      },
      "lineNbr": 1464,
      "author": {
        "id": 1163305
      },
      "writtenOn": "2017-11-17T05:59:03Z",
      "side": 1,
      "message": "Thanks for your comment. Your expectation is like this, right? I would like to keep the current logic as it is not a tricky code and the code readability is also not so bad, but please ask me to change the logic if it is better.\n\n    if (current !\u003d INVALID_SETUP_EVENT) {\n -      // Cancel the event notification if it is not listed in the new event list.\n -      if ((mStkContext[slotId].mCurrentCmd.getSetEventList() \u003d\u003d null)\n -              || !findEvent(current, mStkContext[slotId].mCurrentCmd\n -              .getSetEventList().eventList)) {\n -          unregisterEvent(current, slotId);\n -      }\n +      // Cancel all the event notifications once.\n +      unregisterEvent(current, slotId);\n    }",
      "parentUuid": "3b39b75d_ab51d2b8",
      "range": {
        "startLine": 1464,
        "startChar": 19,
        "endLine": 1464,
        "endChar": 95
      },
      "revId": "8f6c0583632069b6e0a10421bba9384969bf5c9a",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}