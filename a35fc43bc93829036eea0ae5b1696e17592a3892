{
  "comments": [
    {
      "key": {
        "uuid": "3484ce66_8b714277",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121198
      },
      "writtenOn": "2020-08-20T18:26:26Z",
      "side": 1,
      "message": "We\u0027re seeing issues reported by carriers that a regression has occurred between Android 10 and Android 11 when handling homekey response time. According to the report and attached logs, in Android 10 the handleIdleScreen (now handleHomeKeyPressed) would trigger right after user input, but in Android 11 the function does not trigger until about a minute later.\n\nSince this is the only change that went in to R related to this behavior, I\u0027m creating a revert as a speculative fix.",
      "revId": "a35fc43bc93829036eea0ae5b1696e17592a3892",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eb8ab207_05598e37",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1163305
      },
      "writtenOn": "2020-08-20T22:43:57Z",
      "side": 1,
      "message": "Dear Jordan,\n\nIs the reproducibility high? I will ask my team to check the behaviors on our devices with Android 11. If these revert commits work, the cause of the reported issue might be a delay of the broadcast and we should identify the cause of the late broadcast instead.\n\nBest regards,\nYoshiaki",
      "parentUuid": "3484ce66_8b714277",
      "revId": "a35fc43bc93829036eea0ae5b1696e17592a3892",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ac8e6df9_b3a2f09f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121198
      },
      "writtenOn": "2020-08-20T23:34:31Z",
      "side": 1,
      "message": "The reproducibility is 100% for the specific test case. It\u0027s possible that the reported issue is due to the delayed broadcast, but for delays up to 1 minute it seems unlikely that the broadcast is just delayed.",
      "parentUuid": "eb8ab207_05598e37",
      "revId": "a35fc43bc93829036eea0ae5b1696e17592a3892",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0cb94825_03cd2e49",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1163305
      },
      "writtenOn": "2020-08-20T23:47:36Z",
      "side": 1,
      "message": "Thank you for the response. I might ask you some more questions about the test case later, if we cannot reproduce the issue. I guess that not only STK but also other applications cannot receive the same broadcast or the phone process is extremely busy.",
      "parentUuid": "ac8e6df9_b3a2f09f",
      "revId": "a35fc43bc93829036eea0ae5b1696e17592a3892",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "555d3ee9_3a746e24",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121198
      },
      "writtenOn": "2020-08-20T23:50:55Z",
      "side": 1,
      "message": "Actually one useful detail is that when lookin at the bugreport I actually see the broadcast in the broadcast history section being sent at the correct time. The issue is that the StkAppService does not print out any log like \"Process the home key pressed event\" which suggests it\u0027s not posting the OP_HOME_KEY_PRESSED message.",
      "parentUuid": "0cb94825_03cd2e49",
      "revId": "a35fc43bc93829036eea0ae5b1696e17592a3892",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fd4b9202_ab559582",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1163305
      },
      "writtenOn": "2020-08-21T10:19:38Z",
      "side": 1,
      "message": "@Jordan - Apologies for my fault. Do we already have a bug ID or should I file new issue report in Buganizer? I uploaded the following commit and now I can see the expected behavior.\n\n    Specify OP_HOME_KEY_PRESSED correctly\n    https://android-review.googlesource.com/c/platform/packages/apps/Stk/+/1406848\n\nThe cause of the issue was my careless mistake made when I rebased the following change.\n\n    Differentiate home screen from others implemented in the same activity\n    https://android-review.googlesource.com/c/platform/packages/apps/Stk/+/940240/6..7/src/com/android/stk/StkAppService.java\n\nBetween the patch set 6 and the patch set 7, the other fix below was merged and the operation code was moved from \u0027arg1\u0027 to \u0027what\u0027. However, I did not notice it at that time and could not update this part.\n\n    Operation code should be handled with the field \u0027what\u0027 of Message class\n    https://android-review.googlesource.com/c/platform/packages/apps/Stk/+/963551\n\nI think that you also see the invalid operation code \u00270\u0027 in the bug report you have.\n\n    08-21 15:31:47.246 2966 5845 D CAT : StkAppService: handleMessage opcode[0], sim id[0]",
      "parentUuid": "555d3ee9_3a746e24",
      "revId": "a35fc43bc93829036eea0ae5b1696e17592a3892",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "87813570_54ac46b7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1121198
      },
      "writtenOn": "2020-08-21T16:12:08Z",
      "side": 1,
      "message": "Good catch! We have an internal tracking bug (not sure if I can share it with you because it\u0027s filed for a carrier) but I will refrain from the revert and just upload the fix you described. Thanks for the help",
      "parentUuid": "fd4b9202_ab559582",
      "revId": "a35fc43bc93829036eea0ae5b1696e17592a3892",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}